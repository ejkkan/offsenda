# Dragonfly instance - operator is installed via dragonfly-operator-install.yaml
apiVersion: dragonflydb.io/v1alpha1
kind: Dragonfly
metadata:
  name: dragonfly
  namespace: batchsender
spec:
  replicas: 3  # 1 master + 2 replicas, auto-failover
  labels:
    role: master  # Fix for operator bug - service selector requires this label
  resources:
    requests:
      cpu: "1"
      memory: 4Gi
    limits:
      cpu: "4"
      memory: 16Gi
  args:
    - "--maxmemory"
    - "14gb"
