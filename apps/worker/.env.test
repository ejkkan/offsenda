# =============================================================================
# BATCHSENDER TEST ENVIRONMENT
# =============================================================================
# This configuration is used for e2e and integration tests.
#
# SAFETY: All tests use API keys starting with "bsk_test_" which FORCE
# dryRun mode. This means NO real emails/SMS are ever sent, even if
# tests accidentally point to production infrastructure.
# =============================================================================

DATABASE_URL="postgresql://batchsender:batchsender@localhost:5455/batchsender"
WEBHOOK_SECRET="test-secret"
DRAGONFLY_URL="localhost:6379"
NATS_CLUSTER="nats://localhost:4222"
CLICKHOUSE_URL="http://localhost:8123"
CLICKHOUSE_USER="default"
CLICKHOUSE_PASSWORD="clickhouse"
CLICKHOUSE_DATABASE="batchsender"
EMAIL_PROVIDER="mock"
NODE_ENV="test"

# IMPORTANT: Disable rate limiting in tests to avoid requiring Dragonfly/Redis
# This allows tests to run fast without external dependencies
DISABLE_RATE_LIMIT=true

# =============================================================================
# TEST API KEY SAFETY
# =============================================================================
# Tests generate API keys with prefix "bsk_test_" (see test/helpers/fixtures.ts)
# These keys ALWAYS force dryRun=true at batch creation time:
#   - No real emails sent (even with real RESEND_API_KEY)
#   - No real SMS sent (even with real TELNYX_API_KEY)
#   - No real outbound webhooks
#
# This is enforced in api.ts and CANNOT be bypassed.
# Even in production, bsk_test_* keys are safe for e2e testing.
